import{_ as a,c as e,o as s,V as i}from"./chunks/framework.BDcLCbPe.js";const r="/nuxt-3-server-fundamentals/assets/screen28.ChQ55rgC.jpg",t="/nuxt-3-server-fundamentals/assets/screen29.CU27ztC1.jpg",n="/nuxt-3-server-fundamentals/assets/screen30.DiVFIYFI.jpg",o="/nuxt-3-server-fundamentals/assets/screen31.CPJGVoyl.jpg",d="/nuxt-3-server-fundamentals/assets/screen32.BI_XFkMe.jpg",c="/nuxt-3-server-fundamentals/assets/screen33.DU-_Nrsh.jpg",p="/nuxt-3-server-fundamentals/assets/screen34.BnL6GLhl.jpg",l="/nuxt-3-server-fundamentals/assets/screen35.5juwidJD.jpg",h="/nuxt-3-server-fundamentals/assets/screen36.BHbscRd8.jpg",u="/nuxt-3-server-fundamentals/assets/screen37.BSat9Es4.jpg",m="/nuxt-3-server-fundamentals/assets/screen38.CDjCBlsF.jpg",g="/nuxt-3-server-fundamentals/assets/screen39.BpPkaWiS.jpg",k="/nuxt-3-server-fundamentals/assets/screen40.CnmcIjnT.jpg",x=JSON.parse('{"title":"Ruta Din√°mica Anidada de la API del Servidor","description":"","frontmatter":{},"headers":[],"relativePath":"dynamic-nested-server-api-route.md","filePath":"dynamic-nested-server-api-route.md"}'),v={name:"dynamic-nested-server-api-route.md"},E=i('<h1 id="ruta-dinamica-anidada-de-la-api-del-servidor" tabindex="-1">Ruta Din√°mica Anidada de la API del Servidor <a class="header-anchor" href="#ruta-dinamica-anidada-de-la-api-del-servidor" aria-label="Permalink to &quot;Ruta Din√°mica Anidada de la API del Servidor&quot;">‚Äã</a></h1><h2 id="aprenda-a-crear-una-ruta-api-anidada-dinamica" tabindex="-1">Aprenda a crear una ruta API anidada din√°mica <a class="header-anchor" href="#aprenda-a-crear-una-ruta-api-anidada-dinamica" aria-label="Permalink to &quot;Aprenda a crear una ruta API anidada din√°mica&quot;">‚Äã</a></h2><p>Ahora que sabemos c√≥mo crear rutas API anidadas simples, intentemos crear rutas API din√°micas anidadas. Ser√° algo como <a href="./basic-dynamic-server-api-route.html">esto</a>, solo que estar√° anidado.</p><p><img src="'+r+'" alt="screen12"></p><p>Pero antes, una nota r√°pida sobre esto. En la <a href="https://nuxt.com/docs/guide/directory-structure/server#server-routes" target="_blank" rel="noreferrer">documentaci√≥n oficial de Nuxt</a> dice lo siguiente:</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Tenga en cuenta que actualmente las rutas del servidor no admiten la funcionalidad completa de las rutas din√°micas como lo hacen las p√°ginas.</p></div><p>Durante la prueba, realmente funciona. Pero no sugerir√≠a que uses esto en el tus proyectos del mundo real. Estamos seguro de que en el futuro admitir√°n rutas API din√°micas, as√≠ que realmente, vamos a probarlo.</p><p>En la carpeta <code>api/</code> creemos una nueva carpeta, digamos por ejemplo, que tenemos productos, as√≠ que ser√° <code>products/</code>.</p><p><img src="'+t+'" alt="screen12"></p><h2 id="crear-archivo-dinamico" tabindex="-1">Crear archivo din√°mico <a class="header-anchor" href="#crear-archivo-dinamico" aria-label="Permalink to &quot;Crear archivo din√°mico&quot;">‚Äã</a></h2><p>Luego dentro de la carpeta <code>products/</code>, creemos un nuevo archivo que ser√° una categor√≠a din√°mica. Entonces ser√° <code>[category]</code> seguido de un m√©todo HTTP m√°s la extensi√≥n <code>.ts</code>.</p><p><img src="'+n+`" alt="screen12"></p><p>Entonces, dentro de este archivo exporte el valor predeterminado <code>defineEventHandler</code> pasando <code>event</code> como parametro. Y luego simplemente regresemos <code>&#39;Product Category.&#39;</code>.</p><p>üìÉ<code>./server/api/products/[category].get.ts</code></p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineEventHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Product Category.&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>Depu√©s veamos eso en acci√≥n con Postman enviando <code>/api/products/sdsdsds</code>. Esto viene siendo los productos y luego el nombre din√°mico de la categor√≠a.</p><p><img src="`+o+'" alt="screen12"></p><h2 id="crear-carpeta-dinamica-anidada" tabindex="-1">Crear carpeta din√°mica anidada. <a class="header-anchor" href="#crear-carpeta-dinamica-anidada" aria-label="Permalink to &quot;Crear carpeta din√°mica anidada.&quot;">‚Äã</a></h2><p>Crearemos una nueva carpeta la cual ser√° una categor√≠a, entonces llamarla <code>[category]</code>, est√° bien as√≠. Muy similar a el archivo <code>[category].get.ts</code>, la √∫nica diferencia es que este es un archivo y <code>[category]</code> es una carpeta.</p><p><img src="'+d+'" alt="screen12"></p><h2 id="crear-archivo-dinamica-anidado-dentro-de-carpeta-dinamica" tabindex="-1">Crear archivo din√°mica anidado dentro de carpeta din√°mica. <a class="header-anchor" href="#crear-archivo-dinamica-anidado-dentro-de-carpeta-dinamica" aria-label="Permalink to &quot;Crear archivo din√°mica anidado dentro de carpeta din√°mica.&quot;">‚Äã</a></h2><p>Dentro de la carpeta din√°mica <code>[category]/</code>, creemos un nuevo archivo din√°mico llamado <code>[product_id]</code> seguido de un m√©todo <code>get</code> y <code>ts</code> como extensi√≥n.</p><p><img src="'+c+`" alt="screen12"></p><p>Entonces, dentro de este archivo exporte el valor predeterminado <code>defineEventHandler</code> pasando <code>event</code> como parametro. Y luego simplemente regresemos <code>&#39;Product ID.&#39;</code>.</p><p>üìÉ<code>./server/api/products/[category]/[product_id].get.ts</code></p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineEventHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Product ID.&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>Ahora vamos a probar esto para ver en acci√≥n si realmente es as√≠, as√≠ que vamos a Postman.</p><p>Agregaremos otra barra diagonal para que active el ID del producto que tambi√©n es din√°mico, por ejemplo, <code>/api/products/sdsdsds/123</code> generar√° <code>&#39;Product ID.&#39;</code>.</p><p><img src="`+p+`" alt="screen12"></p><p>Para ver en acci√≥n si realmente est√° trabajando, obtengamos los par√°metros del enrutador con la funci√≥n <code>getRouterParams</code>.</p><p>üìÉ<code>./server/api/products/[category]/[product_id].get.ts</code></p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineEventHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getRouterParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>Luego gu√°rdelo y pruebe en Postman enviando esto que generar√° la categor√≠a <code>sdsdsds</code> y el ID del producto <code>123</code>.</p><p><img src="`+l+'" alt="screen12"></p><h2 id="corroborando-la-funcionalidad-anterior" tabindex="-1">Corroborando la funcionalidad anterior <a class="header-anchor" href="#corroborando-la-funcionalidad-anterior" aria-label="Permalink to &quot;Corroborando la funcionalidad anterior&quot;">‚Äã</a></h2><p>Probemos con <code>/api/products/sdsdsds</code> para corroborar que est√° funcionando <a href="./dynamic-nested-server-api-route.html#crear-archivo-dinamico">el punto anterior</a>.</p><p><img src="'+h+`" alt="screen12"></p><p>Si intentamos que genere los par√°metros de la categor√≠a del producto obteniendo los par√°metros del enrutador con la funci√≥n <code>getRouterParams</code>.</p><p>üìÉ<code>./server/api/products/[category].get.ts</code></p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineEventHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getRouterParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>Ahora esta ruta deber√≠a generar solo los par√°metros de la categor√≠a, as√≠ que volvamos a Postman y vamos a la acci√≥n.</p><p><img src="`+u+'" alt="screen12"></p><p>Hagamos otra prueba con la ruta <code>/api/products/category-value/1234</code>.</p><p><img src="'+m+'" alt="screen12"></p><p>Entonces nos devolver√° la caregor√≠a <code>category-value</code> y el ID del producto <code>1234</code>. Lo que quiere decir que esto est√° funcionando bien.</p><h2 id="probando-otro-metodo" tabindex="-1">Probando otro m√©todo <a class="header-anchor" href="#probando-otro-metodo" aria-label="Permalink to &quot;Probando otro m√©todo&quot;">‚Äã</a></h2><p>Funcionar√° igual con el m√©todo <code>post</code>, as√≠ que vamos a probarlo.</p><p>Copiemos y peguemos en la misma carpeta <code>./server/api/products/[category]/</code> el archivo <code>[product_id].get.ts</code> renombr√°ndolo como <code>[product_id].post.ts</code>.</p><p><img src="'+g+'" alt="screen12"></p><p>Recuerde cambiar en Postman el m√©todo a <code>POST</code> antes de enviar y todo funcionar√° igual.</p><p><img src="'+k+'" alt="screen12"></p><p>As√≠ que lo mismo para <code>put</code>, <code>patch</code> y <code>delete</code>.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Creemos que hasta ahora Nuxt no ha verificado esto, pero estamos seguro de que lo har√°n a futuro inmediato.</p></div>',53),y=[E];function b(_,f,F,P,A,C){return s(),e("div",null,y)}const D=a(v,[["render",b]]);export{x as __pageData,D as default};
